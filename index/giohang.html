<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fastbootstrap@2.2.0/dist/css/fastbootstrap.min.css"
        integrity="sha256-V6lu+OdYNKTKTsVFBuQsyIlDiRWiOmtC8VQ8Lzdm2i4=" crossorigin="anonymous">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <title>Tất cả sản phẩm</title>
</head>

<body>

    <header>
        <!--Trên -->
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
            <!--Trái -->
            
            <a class="nav-link" href="../index/homepage.html"><img src="../img/Headerlogo.png" width="60" alt="Logo" /></a>
                  
              <!--Giữa -->
              <div class="navbar-brand mx-auto text-center brand-name" style="font-family: serif; font-size: 1.5rem;">
                Radiant Soirré Perfume
              </div>
              <!--Phải -->
              <ul class="navbar-nav">
                <li class="nav-item">
                  
                  <a class="nav-link position-relative" href="../index/giohang.html">
                    <span><i class="fas fa-shopping-cart"></i></span>
                  </a>
                  <a class="nav-link position-relative" href="../index/products.html">
                    <span><i class="fa-solid fa-magnifying-glass"></i></span>
                  </a>
                  
                  
                </li>
              </ul>
            </div>
          </nav>
    <!--Dưới -->
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
              <!-- <a class="navbar-brand" href="#">Navbar</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button> -->
              <!--Menu -->
              <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav mx-auto">
                  <ul class="navbar-nav me-auto mb-0">
                    <li class="nav-item">
                      <a class="nav-link active" aria-current="page" href="../index/homepage.html">Trang chủ</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" aria-current="page" href="../index/products.html">Sản phẩm</a>
                    </li>
                    <li class="nav-item dropdown">
                      <!-- Set href to "../index/brands.html" to navigate directly when clicked -->
                      <a class="nav-link dropdown-toggle" href="../index/brands.html" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Danh sách thương hiệu
                      </a>
                      <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="../index/19-69.html">19-69</a></li>
                        <li><a class="dropdown-item" href="../index/angelaciam.html">Angela Ciampagna</a></li>
                        <li><a class="dropdown-item" href="../index/astrophil.html">Astrophil & Stella</a></li>
                        <li><a class="dropdown-item" href="../index/byredo.html">Byredo</a></li>
                        <li><a class="dropdown-item" href="../index/dame.html">Dame Perfumery</a></li>
                        <li><a class="dropdown-item" href="../index/diptyque.html">Diptyque</a></li>
                        <li><a class="dropdown-item" href="../index/dusita.html">Dusita Paris</a></li>
                        <li><a class="dropdown-item" href="../index/gucci.html">Gucci</a></li>
                        <li><a class="dropdown-item" href="../index/jomalone.html">Jo Malone</a></li>
                        <li><a class="dropdown-item" href="../index/maisonmar.html">Maison Margiela</a></li>
                        <li><a class="dropdown-item" href="../index/mariejeanne.html">Marie Jeanne</a></li>
                        <li><a class="dropdown-item" href="../index/marlou.html">Marlou</a></li>
                        <li><a class="dropdown-item" href="../index/nasomatto.html">Nasomatto</a></li>
                        <li><a class="dropdown-item" href="../index/narcisobrands.html">narciso rodriguez</a></li>
                        <li><a class="dropdown-item" href="../index/placedeslices.html">Place des Lices</a></li>
                      </ul>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" aria-current="page" href="../index/gioithieu.html">Về Radiant Soirée Perfume</a>
                    </li>
                    
                    <li class="nav-item">
                      <a class="nav-link" aria-current="page" href="../index/lienhe.html">Liên hệ</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
          
    </header>

    <div class="container mt-4">
        <h2 class="text-center">Giỏ hàng của bạn</h2>
        <table class="table table-bordered" id="cartTable">
            <thead>
                <tr>
                    <th scope="col">Sản phẩm</th>
                    <th scope="col">Giá</th>
                    <th scope="col">Số lượng</th>
                    <th scope="col">Tổng</th>
                    <th scope="col">Xóa</th>
                </tr>
            </thead>
            <tbody>
                <!-- Sản phẩm sẽ được thêm vào đây bằng JavaScript -->
            </tbody>
        </table>
        <div class="d-flex justify-content-end">
            <h4 id="totalAmount">Tổng tiền: 0 VND</h4>
        </div>
        <a href="#" class="btn btn-success mt-3">Tiến hành thanh toán</a>
    </div>

    <script>
        // Lấy giỏ hàng từ localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartTableBody = document.querySelector("tbody");
        const totalPriceDiv = document.querySelector("#totalAmount");

        // Hàm hiển thị giỏ hàng và tính tổng tiền
        function renderCart() {
            if (cart.length === 0) {
                cartTableBody.innerHTML = "<tr><td colspan='5'>Giỏ hàng của bạn trống.</td></tr>";
                totalPriceDiv.innerHTML = "Tổng tiền: 0 VND";
            } else {
                let total = 0;
                cartTableBody.innerHTML = '';  // Xóa các sản phẩm cũ trong bảng giỏ hàng

                cart.forEach(item => {
                    let row = `
                        <tr>
                            <td>
                                <img src="${item.image}" alt="${item.name}" width="100">
                                ${item.name}
                            </td>
                            <td>${item.price.toLocaleString()} VND</td>
                            <td>
                                <input type="number" class="form-control quantity" value="${item.quantity}" min="1" data-name="${item.name}">
                            </td>
                            <td class="total-price">${(item.price * item.quantity).toLocaleString()} VND</td>
                            <td><button class="btn btn-danger btn-sm remove-item" data-name="${item.name}">Xóa</button></td>
                        </tr>
                    `;
                    cartTableBody.innerHTML += row;

                    // Cộng tổng tiền
                    total += item.price * item.quantity;
                });

                totalPriceDiv.innerHTML = `Tổng tiền: ${total.toLocaleString()} VND`;
            }
        }

        // Gọi hàm renderCart để hiển thị giỏ hàng ban đầu
        renderCart();

        // Lắng nghe sự kiện thay đổi số lượng sản phẩm
        cartTableBody.addEventListener("input", function(e) {
            if (e.target.classList.contains("quantity")) {
                let name = e.target.getAttribute("data-name");
                let newQuantity = e.target.value;

                // Cập nhật số lượng sản phẩm trong giỏ hàng
                let product = cart.find(item => item.name === name);
                if (product) {
                    product.quantity = parseInt(newQuantity);
                }

                // Cập nhật lại giỏ hàng trong localStorage
                localStorage.setItem("cart", JSON.stringify(cart));

                // Cập nhật lại tổng tiền
                renderCart();
            }
        });

        // Lắng nghe sự kiện xóa sản phẩm khỏi giỏ hàng
        cartTableBody.addEventListener("click", function(e) {
            if (e.target.classList.contains("remove-item")) {
                let name = e.target.getAttribute("data-name");

                // Xóa sản phẩm khỏi giỏ hàng
                cart = cart.filter(item => item.name !== name);

                // Cập nhật lại giỏ hàng trong localStorage
                localStorage.setItem("cart", JSON.stringify(cart));

                // Cập nhật lại giỏ hàng và tổng tiền
                renderCart();
            }
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <footer class="bg-white text-dark py-4" >
        <div style="background-color: #181C14; color: white;" >
          <div class="container" style="padding-top: 10px;" >
              <div class="row">
                  <!-- Cột 1: Địa chỉ, email, số điện thoại -->
                  <div class="col-md-4 mb-3">
                    
                      <h5>Liên hệ</h5>
                  
                      <ul class="list-unstyled">
                          <li class="d-flex align-items-center mb-2">
                              <i class="fas fa-map-marker-alt me-3"></i>
                              <span>12 Chùa Bộc, Đống Đa, Hà Nội</span>
                          </li>
                          <li class="d-flex align-items-center mb-2">
                              <i class="fas fa-envelope me-3"></i>
                              <span>radiantsoireeservice@gmail.com</span>
                          </li>
                          <li class="d-flex align-items-center mb-2">
                              <i class="fas fa-phone me-3"></i>
                              <span>0199 1234</span>
                          </li>
                      </ul>
                  </div>
        
                  <!-- Cột 2: Logo -->
                  <div class="col-md-4 text-center mb-3">
                    <a class="nav-link" href="../index/homepage.html" ><img src="../img/footerlogo.png"  alt="Logo" class="img-fluid rounded-circle" /></a>
                  </div>
        
                  <!-- Cột 3: Menu -->
                  <div class="col-md-4 text-center mb-3">
                      <div class="d-inline-block text-start">
                          <h5 class="mb-3">Menu</h5>
                          <ul class="list-unstyled">
                              <li class="d-flex align-items-center mb-2">
                                  <i class="fas fa-home me-3"></i>
                                  <a  href="../index/homepage.html" class="text-light text-decoration-none" style="color: white;">Trang chủ</a>
                              </li>
                              <li class="d-flex align-items-center mb-2">
                                  <i class="fas fa-info-circle me-3"></i>
                                  <a href="../index/gioithieu.html" class="text-light text-decoration-none">Giới thiệu</a>
                              </li>
                              <li class="d-flex align-items-center mb-2">
                                  <i class="fa-brands fa-product-hunt me-3"></i>
                                  <a href="../index/products.html" class="text-light text-decoration-none">Sản phẩm</a>
                              </li>
                              <li class="d-flex align-items-center mb-2">
                                  <i class="fa-solid fa-copyright me-3"></i>
                                  <a href="../index/brands.html" class="text-light text-decoration-none">Thương hiệu</a>
                              </li>
                          </ul>
                      </div>
                  </div>
              </div>
          </div>
        </div>
      </footer>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
      <script>
          $(document).ready(function () {
              $("#flip").click(function () {
                  $("#panel").slideToggle("slow");
              });
          });
      </script>
  
  <script>
      $(document).ready(function () {
          $("#flip2").click(function () {
              $("#panel2").slideToggle("slow");
          });
      });
  </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
          crossorigin="anonymous"></script>
  
         <script>
            function loadCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');

                cartItems.innerHTML = '';
                let total = 0;

                    cart.forEach((product, index) => {
                        const productTotal = product.quantity * parseFloat(product.price);
                        total += productTotal;

                        cartItems.innerHTML += `
                            <tr>
                                <td>${product.name}</td>
                                <td><img src="${product.image}" width="50"></td>
                                <td>${product.quantity}</td>
                                <td>${product.price.toLocaleString()} VND</td>
                                <td>${productTotal.toLocaleString()} VND</td>
                                <td><button onclick="removeFromCart(${index})">Xóa</button></td>
                            </tr>
                        `;
                    });

                    cartTotal.textContent = `Tổng cộng: ${total.toLocaleString()} VND`;
                }

                // Hàm xóa sản phẩm
                function removeFromCart(index) {
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];
                    cart.splice(index, 1);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    loadCart();
                }

                // Hàm xóa toàn bộ giỏ hàng
                function clearCart() {
                    localStorage.removeItem('cart');
                    loadCart();
                }

                // Gọi hàm loadCart khi trang được tải
                window.onload = loadCart;

                        </script>
        
  </body>
  
  </html>
